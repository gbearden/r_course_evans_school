---
title: "R Basics"
author: "Graham Bearden"
date: "January 10, 2017"
output:
  slidy_presentation:
    css: custom.css
---

```{r setup, include=FALSE}
library(tidyverse)
library(knitr)

setwd('/Users/graham/r_course_evans_school')

opts_chunk$set(warning=FALSE, message=FALSE)

donor <- read_csv('data/small_donations_data.csv')
police <- read_csv('data/small_police_data.csv')

```

----

# First things first

<div class='column-left'>
- Set up your machine to run R
  - Install R ([on a Mac](https://cran.rstudio.com/bin/macosx/R-3.4.3.pkg) and [on a PC](https://cran.rstudio.com/bin/windows/base/R-3.4.3-win.exe))
  - Install R Studio ([on a Mac](https://download1.rstudio.org/RStudio-1.1.383.dmg) and [on a PC](https://download1.rstudio.org/RStudio-1.1.383.exe))
- Make sure you can install packages
  - 2 ways to install packages
    - Command line/Console
    - R Studio GUI
</div>

----

# First things first

<div class='column-left'>
- Set up your machine to run R
  - Install R ([on a Mac](https://cran.rstudio.com/bin/macosx/R-3.4.3.pkg) and [on a PC](https://cran.rstudio.com/bin/windows/base/R-3.4.3-win.exe))
  - Install R Studio ([on a Mac](https://download1.rstudio.org/RStudio-1.1.383.dmg) and [on a PC](https://download1.rstudio.org/RStudio-1.1.383.exe))
- Make sure you can install packages
  - 2 ways to install packages
    - **Command line/Console**
    - R Studio GUI
</div>

<div class='column-right'>
```r
install.packages('devtools')
```
</div>

----

# First things first

<div class='column-left'>
- Set up your machine to run R
  - Install R ([on a Mac](https://cran.rstudio.com/bin/macosx/R-3.4.3.pkg) and [on a PC](https://cran.rstudio.com/bin/windows/base/R-3.4.3-win.exe))
  - Install R Studio ([on a Mac](https://download1.rstudio.org/RStudio-1.1.383.dmg) and [on a PC](https://download1.rstudio.org/RStudio-1.1.383.exe))
- Make sure you can install packages
  - 2 ways to install packages
    - Command line/Console
    - **R Studio GUI**
</div>

<div class='column-right'>
![](figures/r_studio_install_packages.png){ width=99% }
</div>

----

# Quick Tour of R Studio

----

# Some things you should know

- Mental models and programming
  - Excel/SPSS/Stata --> R/Python/Julia/JavaScript
- What all R programmers do
  - Google for answers
  - Borrow code
  - Ask friends and pros for help
- Useful references (see Reference Materials in the [Syllabus](https://github.com/gbearden/r_course_evans_school/blob/master/syllabus.md) for more)
  - help()
  - ??
  - [R Bloggers](https://www.r-bloggers.com/)
  - [stackoverflow](https://stackoverflow.com/questions/tagged/r)
  
----

# <span style='color:#6DA34D'>Functions</span>, libraries, data

<div class='column-left'>
- Functions perform operations in R
```r
foo <- c(1,2,4)
foo %>% min()
foo %>% mean()
foo %>% max()
foo %>% sd()
```

- Function arguments
  - Arguments are inputs
  - Arguments are comma separated
  - Let's look at arguments in the `lm` function
  
```r 
help(lm)
```
</div>

----

# <span style='color:#6DA34D'>Functions</span>, libraries, data

<div class='column-left'>
- Function arguments
  - Arguments are inputs
  - Arguments are comma separated
  - Let's look at arguments in the `lm` function

```r 
help(lm)
```
</div>
  
<div class='column-right'>
```r
cat_function <- function(love=TRUE){
    if(love==TRUE){
        print('I love cats!')
    }
    else {
        print('I am not a cool person.')
    }
}
```

```r
min <- function(vector_of_values, na.rm=TRUE)
```
</div>

----

# <span style='color:#6DA34D'>Functions</span>, libraries, data

<div class='column-left'>
- Function arguments
  - Arguments are inputs
  - Arguments are comma separated
  - Let's look at arguments in the `lm` function

```r 
help(lm)
```
</div>

<div class='column-right'>
```r
min <- function(vector_of_values, na.rm=TRUE)
```

```r
foo <- c(1,2,NA, 4)
foo %>% min()
foo %>% mean()
foo %>% max()
foo %>% sd()
```
</div>

----

# <span style='color:#6DA34D'>Functions</span>, libraries, data

<div class='column-left'>
- Function arguments
  - Arguments are inputs
  - Arguments are comma separated
  - Let's look at arguments in the `lm` function

```r 
help(lm)
```
</div>

<div class='column-right'>
```r
min <- function(vector_of_values, na.rm=TRUE)
```

```{r, echo = TRUE, collapse=TRUE}
foo <- c(1,2,NA, 4)
foo %>% min()
foo %>% mean()
foo %>% max()
foo %>% sd()
```
</div>

----

# <span style='color:#6DA34D'>Functions</span>, libraries, data

<div class='column-left'>
- Function arguments
  - Arguments are inputs
  - Arguments are comma separated
  - Let's look at arguments in the `lm` function

```r 
help(lm)
```
</div>

<div class='column-right'>
```r
min <- function(vector_of_values, na.rm=TRUE)
```

```{r, echo = TRUE, collapse=TRUE}
foo <- c(1,2,NA, 4)
min(foo, na.rm = TRUE)
mean(foo, na.rm = TRUE)
max(foo, na.rm = TRUE)
sd(foo, na.rm = TRUE)
```
</div>

----

# Functions, <span style='color:#6DA34D'>libraries</span>, data

<div class='column-left'>
- Libraries (or packages) are collections of functions (and datasets)
- Over 10,000 libraries on CRAN

```r
library(tidyverse)
install.packages('tidyverse')
install.packages(c('tidyverse', 'readxl', 'rmarkdown'))
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, matrices, vectors
  - Integers, numbers, characters, factors
- Confirm data type
```r
c('foo', 'moo', 'boo') %>% class()
c('foo', 'moo', 'boo') %>% is.character()
c('foo', 'moo', 'boo') %>% is.factor()
```
- Coerce data type
```r
c('foo', 'moo', 'boo') %>% as.factor()
c('foo', 'moo', 'boo') %>% as.factor() %>% class()
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, matrices, vectors
  - Integers, numbers, characters, factors
- Confirm data type
```{r, echo = TRUE, collapse=TRUE}
c('foo', 'moo', 'boo') %>% class()
c('foo', 'moo', 'boo') %>% is.character()
c('foo', 'moo', 'boo') %>% is.factor()
```
- Coerce data type
```r
c('foo', 'moo', 'boo') %>% as.factor()
c('foo', 'moo', 'boo') %>% as.factor() %>% class()
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, matrices, vectors
  - Integers, numbers, characters, factors
- Confirm data type
```{r, echo = TRUE, collapse=TRUE}
c('foo', 'moo', 'boo') %>% class()
c('foo', 'moo', 'boo') %>% is.character()
c('foo', 'moo', 'boo') %>% is.factor()
```
- Coerce data type
```{r, echo = TRUE, collapse=TRUE}
c('foo', 'moo', 'boo') %>% as.factor()
c('foo', 'moo', 'boo') %>% as.factor() %>% class()
```
</div>


----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - **Data frames**, matrices, vectors
- Data frames look a little like spreadsheets
```r
data_frame(
  x = c(1:3)
  , y = c(4:6)
  , z = c('foo', 'boo', 'moo')
  )
```

```{r, echo = FALSE, collapse=TRUE}
data_frame(x = c(1:3), y = c(4:6), z = c('foo', 'boo', 'moo'))
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - **Data frames**, matrices, vectors
- Data frames look a little like spreadsheets

```r
data_frame(
  x = c(1:3)
  , y = c(4:6)
  , z = c('foo', 'boo', 'moo')
  )
```

```{r, echo = FALSE, collapse=TRUE}
data_frame(x = c(1:3), y = c(4:6), z = c('foo', 'boo', 'moo'))
```
</div>

<div class='column-right'>
- Call a specific variable by name or location in the data frame
  - Use the `$` between the data frame name and the variable name
  - Call the column (or row) by index number
  
```r
cars$speed
cars[,1]
```

```{r, echo = FALSE, collapse=TRUE}
cars$speed %>% head(7)
cars[,1] %>% head(7)
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, **matrices**, vectors
- Matrices and data frames have similar shapes
- Matrices contains data of a single type

```{r, echo = TRUE, collapse=TRUE}
matrix(data = 1:6, nrow = 3, ncol = 2)
```
</div>

----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left-wide'>
- Oh my, so many types of data!
  - Data frames, matrices, **vectors**
- Vectors contain 1 or more values in a string
```{r, echo = TRUE, collapse=TRUE}
c('foo', 'moo', 'boo')
1:10
rep(1:2, times = 2)
rep(c(1,2), times = 2)
seq(from = 0, to = 100, by = 10)
seq(0, 100, 10)
cars$speed
```
</div>

-----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, matrices, **vectors**
- Call a specific element by its location in a vector
```r
c('foo', 'moo', 'boo')[2]
seq(from = 0, to = 100, by = 10)[6]
```
</div>

-----

# Functions, libraries, <span style='color:#6DA34D'>data</span>

<div class='column-left'>
- Oh my, so many types of data!
  - Data frames, matrices, **vectors**
- Call a specific element by its location in a vector
```{r, echo = TRUE, collapse=TRUE}
c('foo', 'moo', 'boo')[2]
seq(from = 0, to = 100, by = 10)[6]
```
</div>

----

# Let's apply what we learned to real data

<div class='column-left'>
Import the small donations dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_donations_data.csv')
```

Write the small donations dataset to a .csv file on your local machine
```r
getwd()
setwd('/Users/graham/Dropbox/R Workshop/data')
write_csv(donor, 'small_donations_data.csv')
```
</div>

----

# Let's apply what we learned to real data

<div class='column-left'>
Import the small donations dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_donations_data.csv')
```

Write the small donations dataset to a .csv file on your local machine
```r
getwd()
setwd('/Users/graham/Dropbox/R Workshop/data')
write_csv(donor, 'small_donations_data.csv')
```
</div>

<div class='column-right-questions'>
Questions<br>
- What type of data object is `donor`?<br>
- What are the `min()` and `mean()` for `amount`?<br>
- What is the `max()` for `legislative_district`?
</div>

----

# Let's apply what we learned to real data

<div class='column-left'>
Import the small donations dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_donations_data.csv')
```

```{r, echo = TRUE, collapse=TRUE}
donor %>% class()
```
</div>

<div class='column-right-questions'>
Questions<br>
- What type of data object is `donor`?<br>
- What are the `min()` and `mean()` for `amount`?<br>
- What is the `max()` for `legislative_district`?
</div>

----

# Let's apply what we learned to real data

<div class='column-left'>
Import the small donations dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_donations_data.csv')
```

```{r, echo = TRUE, collapse=TRUE}
donor %>% class()
donor$amount %>% min()
donor$amount %>% mean()
```
</div>

<div class='column-right-questions'>
Questions<br>
- What type of data object is `donor`?<br>
- What are the `min()` and `mean()` for `amount`?<br>
- What is the `max()` for `legislative_district`?
</div>

----

# Let's apply what we learned to real data

<div class='column-left'>
Import the small donations dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_donations_data.csv')
```

```{r, echo = TRUE, collapse=TRUE}
donor %>% class()
donor$amount %>% min()
donor$amount %>% mean()
donor$legislative_district %>% max(na.rm = TRUE)
```
</div>

<div class='column-right-questions'>
Questions<br>
- What type of data object is `donor`?<br>
- What are the `min()` and `mean()` for `amount`?<br>
- What is the `max()` for `legislative_district`?
</div>

----

# Base R functions to explore your data

<div class='column-left'>
- Get in the habit of running these functions when you open a new dataset
  - `head()` shows you the top subset of a data in a data frame
    - Number of rows is a `head()` argument and defaults at 5
    - `tail()` shows the bottom subset of data in a data frame
  - `summary()` shows summary statistics on all variabes in a dataset
    - Reported summary statistics depend on the variable type
  - `ls()` shows all variables in a data frame
    - You can also use `ls()` without calling an object between the parentheses to see all objects in your workspace
  - `str()` tells the variable type and selected variable values in a data frame for all variables
  - `dim()` tells you the dimensions of your dataset
    - `nrow()` reports the number of rows only 
    - `ncol()` reports the number of columns only
</div>

----

# Base R functions to explore your data

<div class='column-left'>
- Get in the habit of running these functions when you open a new dataset
  - `head()` shows you the top subset of a data in a data frame
    - Number of rows is a `head()` argument and defaults at 5
    - `tail()` shows the bottom subset of data in a data frame
  - `summary()` shows summary statistics on all variabes in a dataset
    - Reported summary statistics depend on the variable type
  - `ls()` shows all variables in a data frame
    - You can also use `ls()` without calling an object between the parentheses to see all objects in your workspace
  - `str()` tells the variable type and selected variable values in a data frame for all variables
  - `dim()` tells you the dimensions of your dataset
    - `nrow()` reports the number of rows only 
    - `ncol()` reports the number of columns only
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows are in `donor`?<br>
- What is the median value for `amount`?<br>
- How many variables are in `donor`?<br>
<i>Hint: There are multiple ways to answers these questions with the functions you know</i>
</div>

----

# Base R functions to explore your data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
donor %>% dim()
donor$amount %>% median(na.rm = TRUE)
donor %>% ncol()
```

Other methods to answer questions
```r
donor %>% summary()
donor %>% ls()
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows are in `donor`?<br>
- What is the median value for `amount`?<br>
- How many variables are in `donor`?<br>
<i>Hint: There are multiple ways to answers these questions with the functions you know</i>
</div>

----

# Base R functions to explore vectors

<div class='column-left'>
- `table()` shows you the distribution of values in a vector
- `length()` tells you in the number of elements in a vector
- `unique()` shows you the unique values in a vector
- `summary()` shows you descriptive statistics for a vector
  - `summary()` can run on a vector or data frame
</div>

----

# Base R functions to explore vectors

<div class='column-left'>
- `table()` shows you the distribution of values in a vector
- `length()` tells you in the number of elements in a vector
- `unique()` shows you the unique values in a vector
- `summary()` shows you descriptive statistics for a vector
  - `summary()` can run on a vector or data frame
</div>

<div class='column-right-questions'>
Questions<br>
- How many 'DEMOCRAT' values are there in `party`?<br>
- Which value in `contributor_employer_state` is most frequent?<br>
- Is 'Mayoral Race' a `type` value?<br>
- How many distinct `first_name` values are there?<br>
<i>Hint: There are multiple ways to answers these questions with the functions you know</i>
</div>

----

# Base R functions to explore vectors

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
table(donor$party) %>% c() %>% .[1]
table(donor$contributor_employer_state) %>% c() %>% tail()
donor$type %>% unique()
donor$first_name %>% unique() %>% length()
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many 'DEMOCRAT' values are there in `party`?<br>
- Which value in `contributor_employer_state` is most frequent?<br>
- Is 'Mayoral Race' a `type` value?<br>
- How many distinct `first_name` values are there?<br>
<i>Hint: There are multiple ways to answers these questions with the functions you know</i>
</div>

----

# Troubleshooting your R code, Take 1

<div class='column-left'>
Make sure...

- You loaded your libraries
- Arguments in your functions are comma-separated
- Your functions have a closing paren
- You have an end quotation mark where relevant
- The variable type is correct to perform the function you call
  - You might want to run `min()` on a character string, but probably not
</div>

<div class='column-right'>
<br>

- Your definition operator looks like this
```r 
<-
```
- You pipe operator looks like this 
```r 
%in%
```
</div>
----

# Practice with police data

<div class='column-left'>
Import the small police dataset in R Studio
```r
donor <- read_csv('https://raw.githubusercontent.com/
  gbearden/r_course_evans_school/master/data/
  small_police_data.csv')
```

```r
getwd()
setwd('/Users/graham/Dropbox/R Workshop/data')
write_csv(police, 'small_police_data.csv')
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value? 
</div>

----

# Practice with police data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
police %>% dim()
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value?  
</div>

----

# Practice with police data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
police %>% dim()
police$event_clearance_date %>% max(na.rm = TRUE)
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value? 
</div>

----

# Practice with police data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
police %>% dim()
police$event_clearance_date %>% max(na.rm = TRUE)
table(police$district_sector) %>% c() %>% .[5:12]
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value? 
</div>

----

# Practice with police data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
police %>% dim()
police$event_clearance_date %>% max(na.rm = TRUE)
table(police$district_sector) %>% c() %>% .[5:12]
police$event_clearance_subgroup %>% table() %>% c() %>% .[32:33]
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value? 
</div>

----

# Practice with police data

<div class='column-left'>
```{r, echo = TRUE, collapse=TRUE}
police %>% dim()
police$event_clearance_date %>% max(na.rm = TRUE)
table(police$district_sector) %>% c() %>% .[5:12]
police$event_clearance_subgroup %>% table() %>% c() %>% .[32:33]
police$census_tract %>% as.integer() %>% min(na.rm = TRUE)
```
</div>

<div class='column-right-questions'>
Questions<br>
- How many rows and columns are there in `police`?<br>
- What is the most recent `event_clearance_date`?<br>
- Which `district_sector` sees the most incident activity?<br>
- How many 'RECKLESS BURNING' incidences are there in `event_clearance_subgroup`?<br>
- What is the smallest `census_tract` value? 
</div>
